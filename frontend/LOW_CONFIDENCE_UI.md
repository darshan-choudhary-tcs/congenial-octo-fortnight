# Frontend Low Confidence Warning - UI Changes

## Visual Changes

### 1. Message Display
When `low_confidence_warning: true`, each assistant message will show:

**Before:**
```
AI Assistant | [High Confidence]
[Message content]
```

**After (Low Confidence):**
```
AI Assistant | [Low Confidence] | [Low KB Match] ⚠️
⚠️ Notice: This response is generated by the AI without relevant content...
---
[Message content]
```

### 2. Toast Notification

**Normal Response:**
```
✓ Response Generated
Confidence: High (75.3%)
```

**Low Confidence Response:**
```
⚠️ Low Confidence Response
No relevant knowledge base content found (15.2% confidence).
Response is from AI without document context.
[Yellow/Amber alert style]
```

### 3. Badge Display

**Two badges shown for low confidence messages:**
1. **Confidence Badge**: Shows confidence level (Very Low, Low, etc.)
2. **Warning Badge** (NEW): "Low KB Match" in amber color

### 4. Components Used

- **Badge Component**: `variant="destructive"` with amber color override
  ```tsx
  <Badge variant="destructive" className="bg-amber-500 hover:bg-amber-600">
    Low KB Match
  </Badge>
  ```

- **Toast Component**: `variant="destructive"` for warning style
  ```tsx
  toast({
    title: '⚠️ Low Confidence Response',
    description: 'No relevant knowledge base content found...',
    variant: 'destructive',
  })
  ```

## User Experience Flow

### Scenario 1: Valid Query, Good Match
```
User: "What is machine learning?"
→ Confidence: 78%
→ No warning badges
→ Toast: "Response Generated | Confidence: High (78%)"
→ Normal display
```

### Scenario 2: Valid Query, Poor Match
```
User: "Tell me about quantum computing"
→ Confidence: 18%
→ Warning badges shown
→ Toast: "⚠️ Low Confidence Response | No relevant KB content..."
→ Response starts with notice
```

### Scenario 3: Gibberish Query
```
User: "asdasdasdasdasdasd"
→ Confidence: 12%
→ Warning badges shown
→ Toast: "⚠️ Low Confidence Response | No relevant KB content..."
→ Response starts with notice
→ User clearly informed this is pure LLM output
```

## Technical Implementation

### Files Modified
- `frontend/app/dashboard/chat/page.tsx`

### Changes Made
1. Added `low_confidence_warning?: boolean` to Message interface
2. Included field when creating assistant message from API response
3. Added conditional warning badge in message display
4. Updated toast notification to show warning for low confidence
5. Visual styling with amber/yellow alert colors

### Props Added to Message Interface
```typescript
interface Message {
  id: string
  role: 'user' | 'assistant'
  content: string
  sources?: any[]
  confidence_score?: number
  low_confidence_warning?: boolean  // NEW
  created_at: string
}
```

## Styling Details

### Warning Badge Colors
```css
bg-amber-500 hover:bg-amber-600
/* Distinct from error (red) and success (green) */
/* Indicates caution, not failure */
```

### Badge Placement
```
[AI Assistant] [Confidence Badge] [Warning Badge]
```
All badges inline, easy to scan

## Benefits

✅ **Immediate Visual Feedback**: Users see warning badges instantly
✅ **Multiple Warning Levels**: Both badge and toast provide awareness
✅ **Contextual Information**: Toast explains why confidence is low
✅ **Non-Intrusive**: Warning embedded in response text as fallback
✅ **Clear Actionability**: Suggests uploading documents or rephrasing

## Backend Integration

The frontend automatically receives:
```json
{
  "response": "⚠️ Notice: This response is...",
  "confidence_score": 0.15,
  "low_confidence_warning": true,  // Backend sets this
  "sources": [],
  // ... other fields
}
```

No additional frontend logic needed - displays automatically based on backend flag.
